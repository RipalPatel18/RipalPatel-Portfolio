<div class="progress">
  <div id="progressBar" class="progress__bar"></div>
</div>

<script is:inline>
  const bar = document.getElementById("progressBar");
  const update = () => {
    const st = window.scrollY || document.documentElement.scrollTop;
    const dh = document.documentElement.scrollHeight - window.innerHeight;
    const pct = dh > 0 ? (st / dh) * 100 : 0;
    bar.style.width = pct + "%";
  };
  window.addEventListener("scroll", update, { passive: true });
  window.addEventListener("resize", update);
  update();
</script>
