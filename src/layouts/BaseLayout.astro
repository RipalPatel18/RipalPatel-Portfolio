---
const { title = "Portfolio" } = Astro.props;
import "../styles/global.css";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Sora:wght@500;600;700;800&display=swap" rel="stylesheet">
  </head>

  <body>
    <div class="bg">
      <div class="grid"></div>
      <div class="orb o1"></div>
      <div class="orb o2"></div>
      <div class="noise"></div>
    </div>

    <Navbar />

    <main>
      <slot />
      <Footer />
    </main>

    <script is:inline>
      // reveal
      const els = document.querySelectorAll("[data-reveal]");
      const io = new IntersectionObserver((entries)=> {
        entries.forEach((e)=> e.isIntersecting && e.target.classList.add("is-in"));
      }, { threshold: 0.12 });
      els.forEach((el)=> io.observe(el));

      // tilt
      document.querySelectorAll("[data-tilt]").forEach((card)=>{
        const max = 10;
        card.addEventListener("mousemove",(e)=>{
          const r = card.getBoundingClientRect();
          const x = e.clientX - r.left;
          const y = e.clientY - r.top;
          const rx = ((y / r.height) - 0.5) * -max;
          const ry = ((x / r.width) - 0.5) * max;
          card.style.transform = `translateY(-6px) rotateX(${rx}deg) rotateY(${ry}deg)`;
        });
        card.addEventListener("mouseleave",()=> card.style.transform = "");
      });

      // mobile menu (Navbar must have these attrs)
      const btn = document.querySelector("[data-menu-btn]");
      const menu = document.querySelector("[data-menu]");
      btn?.addEventListener("click", () => {
        const open = menu?.getAttribute("data-open") === "true";
        menu?.setAttribute("data-open", String(!open));
        btn?.setAttribute("aria-expanded", String(!open));
      });
    </script>
  </body>
</html>
